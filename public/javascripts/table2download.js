!function(e){e.fn.table_download=function(t){var n=0,i=[],o=e.extend({format:"csv",separator:",",filename:"data",linkname:"Export",quotes:'"',newline:"\r\n"},t);if("csv"==o.format)return this.each(function(){n++;var t="\ufeff";e(this).find("tr").each(function(){if(e(this).find("td").length>0){var n="";e(this).find("td").each(function(){t+=n+o.quotes+e(this).text()+o.quotes,n=o.separator}),t+=o.newline}else if(e(this).find("th").length>0){var n="";e(this).find("th").each(function(){t+=n+o.quotes+e(this).text()+o.quotes,n=o.separator}),t+=o.newline}}),window.URL=window.URL||window.webkiURL;var l=new Blob([t]),r=window.URL.createObjectURL(l);if(fileName=o.filename+".csv",a=document.createElement("a"),a.download=fileName,a.href=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.navigator.msSaveOrOpenBlob){var d=[t];blobObject=new Blob(d),i.push({export_id:n,file_name:fileName,blob_object:blobObject}),e(this).find(".table_download_csv_link").click(function(){console.log(i);for(var t=e(this).attr("export_id"),n=0;n<i.length;n++)i[n].export_id==t&&window.navigator.msSaveOrOpenBlob(i[n].blob_object,i[n].file_name)})}})}}(jQuery);