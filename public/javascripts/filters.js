$(function(){$("#btn-filter").on("click",function(){$.post(window.location.pathname,$("#filter-form").serialize(),function(t){return $("#results-table").html(""),t?0===Object.keys(t[0]._id).length?($("#results-count").text(0),void $("#export2excel").hide()):($("#results-count").text(t.length),void(t.length>0&&(t.sort(function(t,o){return t.total-o.total}),createTable($("#results-table")[0],t),$("#results-table thead th:last").css({cursor:"pointer"}).html('<span id="sort-arrow" class="glyphicon glyphicon-arrow-up"></span>total').on("click",function(){$("#results-table tbody").html($("#results-table tbody tr").toArray().reverse()),$("#sort-arrow").hasClass("glyphicon-arrow-up")?$("#sort-arrow").removeClass("glyphicon-arrow-up").addClass("glyphicon-arrow-down"):$("#sort-arrow").removeClass("glyphicon-arrow-down").addClass("glyphicon-arrow-up")}),$("#export2excel").show()))):void $("#results-count").text(0)})}),$("#txt-search").keyup(function(t){var o=$(this).val();""!=o?$("table tbody tr").hide().filter(":contains('"+o+"')").show():$("table#results-table tbody tr").show()}),$("#export2excel").on("click",function(){$("#results-table").table_download({format:"csv",separator:",",filename:"results",linkname:"Export CSV",quotes:'"'})})});